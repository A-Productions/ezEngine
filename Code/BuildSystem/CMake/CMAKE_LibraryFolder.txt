#cmake

# Get the name of this folder
list (GET LIST_CURRENT_FOLDER -1 CURRENT_FOLDER)

file (GLOB HEADER_FILES "${CURRENT_FOLDER}/*.h" "${CURRENT_FOLDER}/*.hpp")
file (GLOB INLINE_FILES "${CURRENT_FOLDER}/*.inl")
file (GLOB SOURCE_FILES "${CURRENT_FOLDER}/*.cpp" "${CURRENT_FOLDER}/*.c")

if (EZ_ENABLE_QT_SUPPORT)
  file (GLOB     UI_FILES "${CURRENT_FOLDER}/*.ui")
  file (GLOB    QRC_FILES "${CURRENT_FOLDER}/*.qrc")

  set (ALL_SOURCE_FILES ${ALL_SOURCE_FILES} ${UI_FILES})
  set (ALL_SOURCE_FILES ${ALL_SOURCE_FILES} ${QRC_FILES})

endif ()

set (ALL_SOURCE_FILES ${ALL_SOURCE_FILES} ${HEADER_FILES})
set (ALL_SOURCE_FILES ${ALL_SOURCE_FILES} ${INLINE_FILES})
set (ALL_SOURCE_FILES ${ALL_SOURCE_FILES} ${SOURCE_FILES})

if (EZ_CMAKE_PLATFORM_WINDOWS_DESKTOP)
	file (GLOB RESOURCE_FILES "${CURRENT_FOLDER}/*.rc" "${CURRENT_FOLDER}/*.ico")
	set (ALL_SOURCE_FILES ${ALL_SOURCE_FILES} ${RESOURCE_FILES})
endif()

set (SOURCE_GROUP_FOLDER "")

# put all the files in an identically named folder in the visual studio solution, to mimic the file system
foreach (VAR ${LIST_SOURCE_GROUP_FOLDER})
    set (SOURCE_GROUP_FOLDER "${SOURCE_GROUP_FOLDER}\\${VAR}")
endforeach ()

source_group ("${SOURCE_GROUP_FOLDER}" FILES ${HEADER_FILES} ${INLINE_FILES} ${SOURCE_FILES} ${UI_FILES} ${QRC_FILES})

# find all cmake files below this directory
file (GLOB DIRS "${CURRENT_FOLDER}/*/CMakeLists.txt")

# add all those directories to the to-be-processed queue
foreach (VAR ${DIRS})

    # add directory to the queue
    include (${VAR})

endforeach ()

